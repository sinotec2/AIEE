---
layout: default
title: 製作AI代理的工作流程
parent: llama-index
grand_parent: 自然語言處理
nav_order: 99
date: 2024-05-03
last_modified_date: 2024-05-07 11:58:34
tags: AI chat
---

# AI Agent workflows
{: .no_toc }

<details open markdown="block">
  <summary>
    Table of contents
  </summary>
  {: .text-delta }
- TOC
{:toc}
</details>
---

## 背景

- 雖然RAGFlow等等軟體系統為AI代理提供了無代碼的製作環境，但還是需要一個概念上的流程管制，以便讓團隊成員可以共同參與在開發過程中。
- 以下大多為豆包所生成的結果，經適度潤飾及調整。

## AI Agent 工作流程

以下是從確定需求一直到上線服務、監理維護製作AI代理的工作流程：

### 確定需求

- **明確業務目標**
  - 確定AI代理要解決的業務問題，
  - 例如在客戶服務中自動回答常見問題、在採購中評估供應商並下達訂單等。
- **分析使用場景**
  - 考慮AI代理將在何處使用
  - 如網站、行動應用程式、企業內部系統等，以及使用者將如何與它互動。
- **收集使用者需求(需求訪談)**
  - 透過與潛在使用者、業務部門或客戶溝通，
  - 了解他們對AI代理的功能、效能和使用者體驗的期望。
- **定義功能範圍**
  - 明確AI代理的核心功能，
  - 如自然語言處理、任務執行、知識檢索等，並確定其邊界，避免功能過於複雜或模糊。

### 設計系統架構

- **選擇技術堆疊**
  - 根據需求和功能選擇合適的技術(堆疊或群組)，
  - 例如選擇深度學習框架（如TensorFlow、PyTorch）進行模型開發，使用Python或C++等語言進行程式設計。
- **確定模型類型**
  - 根據任務選擇適當的語言模型，
  - 如對於自然語言處理任務，可以選擇BERT、GPT等預訓練語言模型；對於強化學習任務，可以使用DQN、PPO等演算法。
- **設計模組架構**
  - 將AI代理劃分為多個模組，基本元件，
  - 如感知模組（用於理解輸入）、決策模組（基於輸入做出決策）和行動模組（執行輸出），並設計它們之間的交互方式。
- **考慮資料流程與媒介**
  - 規劃資料的收集、儲存、預處理和傳輸的方式及媒介，
  - 確保資料能夠有效地流向各個模組，以支援模型的訓練和推理。

### 開發與測試

- **資料準備**
  - **資料收集**
    - 從各種來源收集相關數據，
    - 包括公開資料集、業務系統中的資料、使用者互動資料等。
  - **資料標註**
    - 對收集到的資料進行分類、標註，
    - 例如標注意圖、實體、動作等，以便模型能夠學習並理解資料中的模式。
  - **資料清洗**
    - 處理資料中的缺失值、重複值和噪聲，提高資料品質。
    - 必要時先行試做、測驗數據品質與結果的關聯性。
  - **資料增強**
    - 透過資料增強技術，
    - 如翻譯、旋轉、同義詞替換等，擴展訓練資料集，增加資料的多樣性。
- **模型應用比較**
  - 如已有能滿足需求的多項模型，列表比較其應用表現，
  - 注意模型處於最優化之應用狀態
- **模型訓練與調優**
  - **設定訓練環境**
    - 準備運算資源，如GPU或TPU，以加速模型的訓練流程。
  - **分割訓練資料**
    - 將資料集分成訓練集、驗證集和測試集，用於模型的訓練、調優和評估。
  - **調整超參數**
    - 透過調整學習率、批次大小等超參數，優化模型的效能，以達到最佳的準確率、F1分數等評估指標。
- **功能開發**
  - **實作模組功能**
    - 根據設計的模組架構，開發各模組的功能
    - 包括自然語言處理、知識檢索、任務執行等功能。
  - **整合知識庫**
    - 整合外部知識庫或資料庫，以增強AI代理的回答能力和知識儲備。
  - **開發對話邏輯**
    - 如果AI代理涉及對話功能，開發對話管理器，確保多輪互動的流暢性和邏輯性。
- **測試與驗證**
  - **功能性測試**
    - 驗證AI代理是否按照預期工作，
    - 包括輸入輸出的準確性、功能的完整性等。
  - **效能測試**
    - 測量AI代理的回應時間、準確率和穩健性，確保其符合效能要求。
  - **使用者測試**
    - 邀請使用者參與測試，收集他們的回饋和意見，評估AI代理在實際使用中的互動體驗和表現。
  - **場景測試**
    - 在模擬或真實的使用情境中對AI代理進行測試，
    - 驗證其在各種情況下的行為是否符合預期。

### 上線服務

- **模型最佳化**
  - 透過模型壓縮、量化、蒸餾等技術來減少模型體積，提高模型的運行速度和效率，以便在生產環境中能夠快速回應請求。
- **後端服務部署**
  - 使用Flask、FastAPI或gRPC等框架
  - 為AI代理提供接口，將其部署到伺服器上，使其能夠接收和處理來自客戶端的請求。
- **與現有系統集成**
  - 如果AI代理需要與其他系統進行交互，
  - 如企業的CRM系統、ERP系統等，進行系統集成，確保資料的無縫傳輸和交互。
- **前端介面開發（如果需要）**
  - 根據使用場景，開發使用者與AI代理互動的前端介面，
  - 如網站介面、行動應用程式介面等，提供友善的使用者體驗。

### 監管維護

- **監控與日誌**
  - 建立監控系統，即時監控AI代理在生產環境中的效能，
  - 如回應時間、準確率、錯誤率等指標，並收集日誌數據，以便及時發現問題和分析原因。
- **回饋學習**
  - 利用使用者與AI代理的交互數據，不斷改進模型和最佳化功能，
  - 例如根據使用者的回饋調整模型的參數，或添加新的知識到知識庫中。
- **定期更新**
  - 隨著業務的發展和資料的變化，定期重新訓練或微調模型，以適應新的情況和需求。
  - 同時，及時更新知識庫和功能，確保AI代理的效能和功能始終保持最佳狀態。
- **安全與合規管理**
  - 確保AI代理的運作符合相關的安全和合規標準，保護使用者資料的隱私和安全，防止資料外洩和濫用。
  - 同時，監控AI代理的行為，避免其產生違反倫理或法律的決策和行為。
- **問題處理與優化**
  - 及時處理用戶回饋的問題和在監控中發現的問題，對AI代理進行優化和改進，不斷提升其性能和用戶體驗。

## 方案選擇

當面臨「方案很多、選擇障礙」的情況時，不一定非得對每個方案都進行實際操作來比較效能，以下是一些對策和流程建議：

### 明確目標和標準

- **清楚定義目標**
  - 明確你希望透過實施方案達成什麼具體目標，
  - 例如提高生產效率、降低成本、提升使用者滿意度等。目標越具體，越有助於篩選方案。
- **制定評估標準**
  - 根據目標確定評估方案的具體標準，
  - 如可行性、成本、效益、時間投入、風險程度等。為每個標準設定相應的權重，以反映其在決策中的重要性。

### 收集和分析信息

- **全面收集資訊**
  - 盡可能收集關於各個方案的詳細信息，
  - 包括方案的內容、預期效果、實施難度、可能遇到的問題等。可透過查閱資料、諮詢專家、參考類似案例等方式取得資訊。
- **進行初步篩選**
  - 根據目標和評估標準，對收集到的方案進行初步篩選，
  - 排除明顯不符合要求或存在較大缺陷的方案，縮小選擇範圍。

### 採用決策方法

- **成本效益分析**
  - 計算每個方案的成本和預期收益，比較成本效益比，選擇具有較高性價比的方案。
  - 對於一些經濟指標較為重要的決策，這種方法很有效。
- **風險評估**
  - 評估每個方案可能面臨的風險，
  - 包括技術風險、市場風險、政策風險等。
  - 可以採用風險矩陣等工具，對風險進行量化分析，並優先選擇風險較低的方案。
- **加權評分法**
  - 依照評估標準為每個方案評分，並乘以對應的權重，計算出每個方案的加權總分，選擇總分最高的方案。
  - 此方法可綜合考慮多個因素，較為全面評估方案。

### 尋求外部意見

- **諮詢專業人士**
  - 向相關領域的專家、顧問或有經驗的人士請教，聽取他們對各個方案的看法和建議，
  - 他們的專業知識和經驗可能會幫助你發現一些被忽視的問題或潛在優勢。
- **團隊討論**
  - 組織團隊成員進行討論，分享各自對方案的理解和觀點，
  - 透過團隊的智慧和經驗共同評估方案，可能會產生新的思路和見解，有助於做出更合理的決策。

### 進行小規模試驗或模擬

- **小規模試驗**
  - 對於一些關鍵方案，可以考慮進行小規模的試驗或試點項目，在實際環境中測試方案的可行性和效能，
  - 但這種方式需要投入一定的資源和時間，所以要選擇最有代表性和不確定性較高的方案進行試驗。
- **模擬分析**
  - 利用電腦模擬或數學模型對方案進行模擬分析，預測方案在不同情況下的運作效果。
  - 例如，在物流配送方案中，可以透過模擬軟體分析不同路線規劃和配送策略的效率。

透過以上對策和流程，可以更有系統、科學地對多個方案進行評估和選擇，減少選擇障礙，避免不必要的實踐比較，提高決策效率和品質。