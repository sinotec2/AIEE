---
layout: default
title: 代理與流程編輯器
parent: RAGflow
grand_parent: SearchingEngine
nav_order: 99
date: 2024-10-30 
last_modified_date: 2024-10-30 20:32:31
tags: AI chat report
---

# 代理與流程編輯器
{: .no_toc }

<details open markdown="block">
  <summary>
    Table of contents
  </summary>
  {: .text-delta }
- TOC
{:toc}
</details>
---

## 背景

- RAGFlow 的代理機制將 RAG 技術與無代碼工作流程編輯器結合，適合複雜商業應用場景。透過代理，使用者可利用查詢分類、對話導向等功能，從知識庫中進行檢索並生成回應。可選擇現有模板或自行設定代理，並透過元件如檢索、生成、分類等來自訂工作流程。每個元件有特定的配置要求，確保流程運行順暢，且支持基礎操作如添加、複製和刪除元件。
- 更多詳情請參閱：[RAGFlow 官方文件](https://ragflow.io/docs/dev/agent_introduction)

### 元件

| 元件         | 說明                                                                                                                             |
| ------------ | -------------------------------------------------------------------------------------------------------------------------------- |
| 檢索 (Retrieval) | 從指定的知識庫檢索資訊，若無資訊則返回「空回應」。確保已選擇正確的知識庫。                                       |
| 生成 (Generate) | 讓 LLM 生成回應的元件，必須確保提示設置正確。                                            |
| 互動 (Interact) | 作為人類與機器人之間的介面，接收用戶輸入並顯示代理的回應。                                  |
| 分類 (Categorize) | 使用 LLM 將用戶輸入分類到預定的類別中，需設定每個類別的名稱、描述和示例，以及相應的下一步元件。 |
| 訊息 (Message) | 發送靜態訊息，若提供多條訊息則隨機選擇一條發送。確保下游為介面元件 Interact。               |
| 關聯 (Relevant) | 使用 LLM 判斷上游輸出與用戶查詢的相關性，並根據判斷結果指定下一步元件。                       |
| 重寫 (Rewrite) | 若查詢未檢索到相關資訊，則重新修訂查詢，直到達到預定次數上限。上游需為 Relevant，下游為 Retrieval。|
| 關鍵字 (Keyword) | 從 Wikipedia 檢索前 N 筆結果，使用前需正確設置 TopN 值。                                  |

### 編輯動作

| 基本操作           | 描述                                                                                               |
| ------------------ | -------------------------------------------------------------------------------------------------- |
| 新增元件 (Add a component)      | 從左側面板拖放所需元件到畫布上。                                                            |
| 刪除元件 (Delete a component)    | 在畫布上將滑鼠移到元件的三點符號 (...) 顯示刪除選項，點選以移除元件。                     |
| 複製元件 (Copy a component)      | 在畫布上將滑鼠移到元件的三點符號 (...) 顯示複製選項，點選以複製元件。                     |
| 更新元件設置 (Update component settings) | 在畫布上點擊所需元件即可顯示其設置。                                                |

## 組成一個聊天機器人

建立聊天機器人需要以下步驟：

	1.	設計目標與需求：確定機器人的目標、功能及預期的用戶互動情境。
	2.	選擇框架與技術：選擇 NLP 平台，如 Rasa、Dialogflow，或基於 GPT-4 等模型的自訂解決方案。
	3.	開發對話流程：設定用戶的輸入、回應及對話邏輯，並利用 NLP 技術理解語意。
	4.	整合知識庫：讓機器人能檢索知識庫的資料來回答複雜問題。
	5.	測試與優化：測試機器人反應，優化其準確性和使用者體驗。

要用 RAGFlow 建立一個通用型聊天機器人，
- 首先在「Agents」中選擇聊天機器人範本。
- 配置核心元件，如：Begin（開始對話）、Retrieval（資訊檢索）、Relevant（查詢關聯性確認）、Generate（生成回應）、和 Rewrite（修正查詢）。
- 調整知識庫與提示設定，並
- 儲存與測試設定確保準確性。

詳細步驟請參閱[完整指南](https://ragflow.io/docs/dev/general_purpose_chatbot)

### 開始建立 Agent

|主題|內容|應用元件
|-|-|-
|空白的工作區|從頭開始建立您的代理|開始
|網頁搜尋助手|聊天助理模板，整合了從知識庫中提取的資訊和網路搜尋，以回應查詢。需先在「檢索」中建立您的知識庫！|O/I/R/KW/KB/LLM/W/D/B
|通用聊天機器人|通用型聊天機器人，涉及領域包括醫療、金融、情感交流、即時天氣、資訊等。|O/I/R/KW/KB/LLM/W/D/B
|HR招募推廣助理（中文）|招募推廣助理，能夠推廣候選人、提供工作機會、解決疑問並索取候選人的聯絡方式。讓我們先連結包含「檢索」中職位描述的知識庫！|O/I/C/LLM/M/KB
|客戶服務|一個客戶服務聊天機器人，可以解釋產品規格、解決客戶疑問並緩解負面情緒。|
|口譯員|一個簡單的解釋器，可將使用者輸入翻譯成目標語言。嘗試“你好 => 西班牙語”來查看翻譯！|
|文字轉SQL|將使用者查詢轉換為 SQL 語句的代理程式。你必須準備三個知識庫： 1：你的資料庫的DDL； 2：使用者查詢轉換為SQL語句的範例； 3：資料庫的全面描述，包括但不限於表格和記錄。|
|資料庫助理|進階代理，可將使用者查詢轉換為 SQL 語句、執行查詢、評估並傳回結果。你必須準備三個知識庫： 1：你的資料庫的DDL； 2：使用者查詢轉換為SQL語句的範例； 3：資料庫的全面描述，包括但不限於表格和記錄。還需要配置相應的資料庫。|O/I/KB/LLM
|醫療諮詢|醫療諮詢助理，可以提供您一些專業的諮詢建議供您參考。請注意，醫療助理提供的內容僅供參考，可能不真實或無法使用。知識庫內容參考：醫學知識庫參考|
|智能投資顧問|智慧投資顧問，即時解答您的財務問題|

O：Open開始
I：Interface對話框
C：Classifier問題分類
R：RefineQuestion問題最佳化
KW：GetKeyWords關鍵字
KB：SearchKnownledgeBase知識檢索
W：WikiPedia維基百科
D：DuckDuckGo
LLM：生成回答
B：百度搜尋
M：Messager靜態訊息
